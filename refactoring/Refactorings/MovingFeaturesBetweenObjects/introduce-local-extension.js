// NOTE: CODE GENERATED BY AI

/*
Introduce Local Extension Example in JavaScript

Suppose we use a third-party Date utility class, but it lacks a method we need:
getting the next weekday. We can't modify the original class, so we use the
"Introduce Local Extension" refactoring.

--- Before Refactoring ---
*/

// Simulated third-party Date utility (cannot be modified)
class ThirdPartyDate {
  constructor(year, month, day) {
    this.date = new Date(year, month, day);
  }

  getDay() {
    return this.date.getDay();
  }

  toString() {
    return this.date.toDateString();
  }
}

// Somewhere in client code, we need a "nextWeekday" method
function getNextWeekday(date) {
  let next = new Date(date.date);
  do {
    next.setDate(next.getDate() + 1);
  } while (next.getDay() === 0 || next.getDay() === 6); // skip weekends
  return new ThirdPartyDate(
    next.getFullYear(),
    next.getMonth(),
    next.getDate()
  );
}

const myDate = new ThirdPartyDate(2024, 5, 7); // June 7, 2024 (Friday)
const nextWeekday = getNextWeekday(myDate);
console.log(nextWeekday.toString()); // Mon Jun 10 2024

/*
--- After Refactoring (Introduce Local Extension as a Wrapper) ---
*/

// Local extension as a wrapper
class ExtendedDate {
  constructor(yearOrDate, month, day) {
    if (yearOrDate instanceof ThirdPartyDate) {
      this._date = yearOrDate;
    } else {
      this._date = new ThirdPartyDate(yearOrDate, month, day);
    }
  }

  // Delegate to original methods
  getDay() {
    return this._date.getDay();
  }

  toString() {
    return this._date.toString();
  }

  // New extended method
  nextWeekday() {
    let next = new Date(this._date.date);
    do {
      next.setDate(next.getDate() + 1);
    } while (next.getDay() === 0 || next.getDay() === 6);
    return new ExtendedDate(
      next.getFullYear(),
      next.getMonth(),
      next.getDate()
    );
  }
}

// Usage
const myExtDate = new ExtendedDate(2024, 5, 7); // June 7, 2024 (Friday)
const nextExtWeekday = myExtDate.nextWeekday();
console.log(nextExtWeekday.toString()); // Mon Jun 10 2024

// FINAL NOTE:
// This example demonstrates how to introduce a local extension to a third-party utility class
